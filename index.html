
<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>وصّل الأزرار</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@500;700;800;900&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Tajawal', sans-serif; user-select: none; }
        
        body { 
            min-height: 100vh; 
            background: linear-gradient(180deg, #e0f2fe 0%, #bae6fd 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
        }
        
        .container {
            width: 100%;
            max-width: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        
        /* Header */
        .header {
            text-align: center;
            background: white;
            padding: 12px 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .title {
            font-size: 1.4rem;
            font-weight: 900;
            color: #1e40af;
        }
        
        /* Timer Bar - shows during memorization */
        .timer-bar {
            width: 100%;
            background: white;
            padding: 12px 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .timer-bar.show { opacity: 1; }
        
        .timer-text {
            font-size: 1.2rem;
            font-weight: 700;
            color: #f59e0b;
        }
        
        .timer-num {
            font-size: 2rem;
            font-weight: 900;
            color: #dc2626;
            min-width: 40px;
            text-align: center;
        }
        
        /* Stats */
        .stats {
            display: flex;
            gap: 20px;
            background: white;
            padding: 10px 25px;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        
        .stats.hidden { display: none; }
        
        .stat {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 1.1rem;
            font-weight: 700;
            color: #475569;
        }
        
        .stat-value { color: #1e40af; font-weight: 900; }
        
        /* Grid */
        .grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            width: 100%;
        }
        
        /* Card */
        .card {
            height: 120px;
            position: relative;
            cursor: pointer;
            transform-style: preserve-3d;
            transition: transform 0.6s ease;
        }
        
        .card.flipped { transform: rotateY(180deg); }
        
        .card.matched .front {
            background: linear-gradient(135deg, #d1fae5, #a7f3d0) !important;
            border-color: #10b981 !important;
        }
        
        .card.wrong { animation: shake 0.4s ease; }
        
        @keyframes shake {
            0%, 100% { transform: rotateY(180deg) translateX(0); }
            25% { transform: rotateY(180deg) translateX(-8px); }
            75% { transform: rotateY(180deg) translateX(8px); }
        }
        
        .face {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 15px;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 10px;
        }
        
        /* Back - simple solid color, NO emoji */
        .back {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            border: 4px solid #1d4ed8;
            box-shadow: 0 6px 20px rgba(59,130,246,0.3);
        }
        
        /* Front */
        .front {
            background: white;
            border: 4px solid #e5e7eb;
            transform: rotateY(180deg);
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
        }
        
        /* Key card */
        .card.key .front {
            background: linear-gradient(145deg, #1e293b, #334155);
            border-color: #475569;
        }
        
        .key-box {
            background: linear-gradient(180deg, #475569, #334155);
            border: 3px solid #64748b;
            border-radius: 10px;
            padding: 10px 15px;
            box-shadow: 0 4px 0 #1e293b;
        }
        
        .key-name {
            font-size: 1.1rem;
            font-weight: 900;
            color: white;
            text-align: center;
        }
        
        .key-sub {
            font-size: 0.7rem;
            color: #94a3b8;
            margin-top: 6px;
        }
        
        /* Func card */
        .card.func .front {
            background: linear-gradient(145deg, #fef9c3, #fde047);
            border-color: #eab308;
        }
        
        .func-text {
            font-size: 1.15rem;
            font-weight: 800;
            color: #713f12;
            text-align: center;
            line-height: 1.5;
        }
        
        /* Feedback */
        .feedback {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5rem;
            z-index: 100;
            pointer-events: none;
            opacity: 0;
        }
        
        .feedback.show { animation: pop 0.5s ease-out; }
        
        @keyframes pop {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0); }
            40% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(1); }
        }
        
        /* Win Screen */
        .win-screen {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: linear-gradient(180deg, #e0f2fe 0%, #bae6fd 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 200;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s;
            padding: 20px;
        }
        
        .win-screen.show {
            opacity: 1;
            pointer-events: auto;
        }
        
        .win-card {
            background: white;
            border-radius: 25px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 15px 50px rgba(0,0,0,0.15);
            max-width: 350px;
            width: 100%;
        }
        
        .win-title {
            font-size: 2.2rem;
            font-weight: 900;
            color: #1e40af;
            margin-bottom: 15px;
        }
        
        .stars {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .star {
            font-size: 2.5rem;
            opacity: 0.2;
            transition: all 0.4s;
        }
        
        .star.on {
            opacity: 1;
            animation: starPop 0.4s ease-out;
        }
        
        @keyframes starPop {
            0% { transform: scale(0) rotate(-180deg); }
            60% { transform: scale(1.3) rotate(15deg); }
            100% { transform: scale(1) rotate(0); }
        }
        
        .win-stats {
            font-size: 1.1rem;
            color: #64748b;
            margin-bottom: 20px;
        }
        
        /* Remember Summary */
        .summary {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: right;
        }
        
        .summary-title {
            font-size: 1rem;
            font-weight: 800;
            color: #92400e;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .summary-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px dashed #fcd34d;
            font-size: 0.95rem;
        }
        
        .summary-item:last-child { border: none; }
        
        .s-key {
            background: #1f2937;
            color: white;
            padding: 4px 10px;
            border-radius: 6px;
            font-weight: 700;
            font-size: 0.85rem;
        }
        
        .s-func {
            color: #713f12;
            font-weight: 600;
        }
        
        .btn {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 14px 40px;
            font-size: 1.2rem;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 20px rgba(59,130,246,0.35);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59,130,246,0.45);
        }
        
        /* Start Screen */
        .start-screen {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: linear-gradient(180deg, #e0f2fe 0%, #bae6fd 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 300;
            padding: 20px;
        }
        
        .start-screen.hidden { display: none; }
        
        .start-card {
            background: white;
            border-radius: 25px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 15px 50px rgba(0,0,0,0.15);
            max-width: 380px;
            width: 100%;
        }
        
        .start-title {
            font-size: 1.8rem;
            font-weight: 900;
            color: #1e40af;
            margin-bottom: 5px;
        }
        
        .start-sub {
            font-size: 1rem;
            color: #64748b;
            margin-bottom: 20px;
        }
        
        .pairs {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 25px;
        }
        
        .pair {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #f8fafc;
            padding: 10px 15px;
            border-radius: 12px;
            border: 2px solid #e2e8f0;
        }
        
        .p-key {
            background: linear-gradient(135deg, #334155, #1e293b);
            color: white;
            padding: 6px 12px;
            border-radius: 8px;
            font-weight: 800;
            font-size: 0.9rem;
        }
        
        .p-func {
            display: flex;
            align-items: center;
            gap: 6px;
            background: linear-gradient(135deg, #fef9c3, #fde047);
            padding: 6px 12px;
            border-radius: 8px;
            font-weight: 700;
            color: #713f12;
            font-size: 0.9rem;
        }
        
        @media (max-width: 380px) {
            .card { height: 105px; }
            .key-name { font-size: 0.95rem; }
            .func-text { font-size: 0.9rem; }
            .func-icon { font-size: 2rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">وصّل الأزرار</h1>
        </div>
        
        <!-- Timer at TOP - not covering cards -->
        <div class="timer-bar" id="timerBar">
            <span class="timer-text">احفظ!</span>
            <span class="timer-num" id="timerNum">5</span>
        </div>
        
        <div class="stats" id="stats">
            <div class="stat">
                أزواج: <span class="stat-value" id="matches">0</span>/3
            </div>
            <div class="stat">
                محاولات: <span class="stat-value" id="moves">0</span>
            </div>
        </div>
        
        <div class="grid" id="grid"></div>
    </div>
    
    <div class="feedback" id="feedback"></div>
    
    <!-- Win Screen -->
    <div class="win-screen" id="winScreen">
        <div class="win-card">
            <h2 class="win-title">أحسنت!</h2>
            <div class="stars">
                <span class="star" id="s0">⭐</span>
                <span class="star" id="s1">⭐</span>
                <span class="star" id="s2">⭐</span>
            </div>
            <p class="win-stats">عدد المحاولات: <span id="finalMoves">0</span></p>
            
            <div class="summary">
                <div class="summary-title">تذكّر هذه الأزرار!</div>
                <div class="summary-item">
                    <span class="s-key">F5</span>
                    <span class="s-func">تشغيل العرض</span>
                </div>
                <div class="summary-item">
                    <span class="s-key">Enter</span>
                    <span class="s-func">الشريحة التالية</span>
                </div>
                <div class="summary-item">
                    <span class="s-key">Backspace</span>
                    <span class="s-func">الشريحة السابقة</span>
                </div>
            </div>
            
            <button class="btn" onclick="restart()">أعد اللعب</button>
        </div>
    </div>
    
    <!-- Start Screen -->
    <div class="start-screen" id="startScreen">
        <div class="start-card">
            <h1 class="start-title">أزرار PowerPoint</h1>
            <p class="start-sub">وصّل كل زر بوظيفته</p>
            
            <div class="pairs">
                <div class="pair">
                    <span class="p-key">F5</span>
                    <span class="p-func">تشغيل العرض</span>
                </div>
                <div class="pair">
                    <span class="p-key">Enter ↓ →</span>
                    <span class="p-func">الشريحة التالية</span>
                </div>
                <div class="pair">
                    <span class="p-key">Backspace ↑ ←</span>
                    <span class="p-func">الشريحة السابقة</span>
                </div>
            </div>
            
            <button class="btn" onclick="startGame()">ابدأ</button>
        </div>
    </div>

    <script>
        const PAIRS = [
            { key: 'F5', func: 'تشغيل العرض', icon: '▶️' },
            { key: 'Enter ↓ →', sub: 'أو نقرة', func: 'الشريحة التالية', icon: '⏭️' },
            { key: 'Backspace ↑ ←', func: 'الشريحة السابقة', icon: '⏮️' }
        ];
        
        let cards = [];
        let flipped = [];
        let matched = 0;
        let moves = 0;
        let canClick = false;
        
        function shuffle(arr) {
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }
        
        function createCards() {
            cards = [];
            PAIRS.forEach((p, i) => {
                cards.push({ type: 'key', pairId: i, key: p.key, sub: p.sub || '' });
                cards.push({ type: 'func', pairId: i, func: p.func, icon: p.icon });
            });
            shuffle(cards);
        }
        
        function renderCards() {
            const grid = document.getElementById('grid');
            grid.innerHTML = '';
            
            cards.forEach((card, i) => {
                const el = document.createElement('div');
                el.className = `card ${card.type}`;
                
                if (card.type === 'key') {
                    el.innerHTML = `
                        <div class="face back"></div>
                        <div class="face front">
                            <div class="key-box"><div class="key-name">${card.key}</div></div>
                            ${card.sub ? `<div class="key-sub">${card.sub}</div>` : ''}
                        </div>
                    `;
                } else {
                    el.innerHTML = `
                        <div class="face back"></div>
                        <div class="face front">
                            <span class="func-text">${card.func}</span>
                        </div>
                    `;
                }
                
                el.onclick = () => flipCard(i);
                grid.appendChild(el);
            });
        }
        
        function startMemorize() {
            // Show cards (flipped)
            document.querySelectorAll('.card').forEach(c => c.classList.add('flipped'));
            
            // Show timer bar at TOP (not covering cards!)
            const timerBar = document.getElementById('timerBar');
            const timerNum = document.getElementById('timerNum');
            const stats = document.getElementById('stats');
            
            timerBar.classList.add('show');
            stats.classList.add('hidden');
            
            let count = 6;
            timerNum.textContent = count;
            
            const timer = setInterval(() => {
                count--;
                if (count > 0) {
                    timerNum.textContent = count;
                } else {
                    clearInterval(timer);
                    timerBar.classList.remove('show');
                    stats.classList.remove('hidden');
                    hideCards();
                }
            }, 1000);
        }
        
        function hideCards() {
            document.querySelectorAll('.card').forEach(c => c.classList.remove('flipped'));
            setTimeout(() => { canClick = true; }, 800);
        }
        
        function flipCard(i) {
            if (!canClick) return;
            
            const allCards = document.querySelectorAll('.card');
            const el = allCards[i];
            
            if (el.classList.contains('flipped') || el.classList.contains('matched')) return;
            if (flipped.length >= 2) return;
            
            el.classList.add('flipped');
            flipped.push({ index: i, card: cards[i], el });
            
            if (flipped.length === 2) {
                moves++;
                document.getElementById('moves').textContent = moves;
                checkMatch();
            }
        }
        
        function checkMatch() {
            canClick = false;
            const [a, b] = flipped;
            
            const isMatch = a.card.pairId === b.card.pairId && a.card.type !== b.card.type;
            
            if (isMatch) {
                setTimeout(() => {
                    a.el.classList.add('matched');
                    b.el.classList.add('matched');
                    showFeedback('✓');
                    
                    matched++;
                    document.getElementById('matches').textContent = matched;
                    flipped = [];
                    
                    setTimeout(() => {
                        canClick = true;
                        if (matched === PAIRS.length) setTimeout(win, 500);
                    }, 600);
                }, 600);
            } else {
                setTimeout(() => {
                    a.el.classList.add('wrong');
                    b.el.classList.add('wrong');
                    showFeedback('✗');
                    
                    setTimeout(() => {
                        a.el.classList.remove('flipped', 'wrong');
                        b.el.classList.remove('flipped', 'wrong');
                        flipped = [];
                        canClick = true;
                    }, 1000);
                }, 700);
            }
        }
        
        function showFeedback(emoji) {
            const fb = document.getElementById('feedback');
            fb.textContent = emoji;
            fb.classList.remove('show');
            void fb.offsetWidth;
            fb.classList.add('show');
        }
        
        function startGame() {
            document.getElementById('startScreen').classList.add('hidden');
            
            matched = 0;
            moves = 0;
            flipped = [];
            canClick = false;
            
            document.getElementById('matches').textContent = '0';
            document.getElementById('moves').textContent = '0';
            
            createCards();
            renderCards();
            
            setTimeout(startMemorize, 300);
        }
        
        function win() {
            canClick = false;
            document.getElementById('finalMoves').textContent = moves;
            document.getElementById('winScreen').classList.add('show');
            
            setTimeout(() => document.getElementById('s0').classList.add('on'), 200);
            if (moves <= 5) setTimeout(() => document.getElementById('s1').classList.add('on'), 400);
            if (moves <= 4) setTimeout(() => document.getElementById('s2').classList.add('on'), 600);
        }
        
        function restart() {
            document.getElementById('winScreen').classList.remove('show');
            document.querySelectorAll('.star').forEach(s => s.classList.remove('on'));
            startGame();
        }
    </script>
</body>
</html>
